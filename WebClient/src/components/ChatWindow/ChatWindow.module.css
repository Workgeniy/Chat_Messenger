.root { display:flex; flex-direction:column; height:100vh; background:#f5f6f9; }
.header { background:#fff; border-bottom:1px solid #eceff3; padding:12px 16px; font-weight:600; display:flex; align-items:center; gap:12px; }
.typing { font-weight:400; font-size:12px; color:#6b7280; }
.list { flex:1; overflow:auto; padding:16px; display:flex; flex-direction:column; gap:8px; }
.bubble { max-width:70%; padding:10px 12px; border-radius:14px; border:1px solid #e7ebf1; background:#fff; }
.mine { margin-left:auto; background:#4473ff; color:#fff; border-color:#4473ff; }
.their {}
.time { font-size:10px; opacity:.7; margin-top:4px; }
.attachments { display:flex; flex-direction:column; gap:8px; margin-top:6px; }
.composer { display:flex; gap:8px; padding:10px; border-top:1px solid #eceff3; background:#fff; }
.input { flex:1; border:1px solid #d6dbe1; border-radius:12px; padding:10px 12px; outline:none; }
.input:focus { border-color:#7aa2ff; box-shadow:0 0 0 3px rgba(68,115,255,.12); }
.send { background:#4473ff; color:#fff; border:none; border-radius:12px; padding:10px 14px; cursor:pointer; }
.attach { display:inline-flex; align-items:center; justify-content:center; width:40px; border:1px dashed #c9d1e0; border-radius:10px; cursor:pointer; user-select:none; }
.attach:hover { background:#f3f5fb; }

.moreBtn {
    position: absolute;
    top: 6px;
    right: 6px;
    border: none;
    background: transparent;
    cursor: pointer;
    opacity: .6;
}
.moreBtn:hover { opacity: 1; }

.msgMenu {
    position: absolute;
    right: 6px;
    top: 28px;
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    box-shadow: 0 6px 20px rgba(0,0,0,.12);
    display: flex;
    flex-direction: column;
    z-index: 5;
}
.msgMenuItem {
    background: transparent;
    border: none;
    padding: 8px 12px;
    text-align: left;
    cursor: pointer;
}
.msgMenuItem:hover { background: #f3f4f6; }

.deleted {
    color: #9ca3af;
    font-style: italic;
}

.reactionsRow {
    display: flex;
    gap: 6px;
    margin-top: 6px;
    align-items: center;
    flex-wrap: wrap;
}
.reaction {
    border: 1px solid #e5e7eb;
    background: #fff;
    border-radius: 16px;
    padding: 2px 8px;
    font-size: 13px;
    cursor: pointer;
}
.reactionMine { border-color: #60a5fa; background: #eff6ff; }
.reactionAdd {
    border: 1px dashed #e5e7eb;
    background: #fff;
    border-radius: 16px;
    padding: 2px 8px;
    font-size: 13px;
    cursor: pointer;
}

.emojiPicker {
    position: absolute;
    margin-top: 4px;
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 6px;
    box-shadow: 0 6px 20px rgba(0,0,0,.12);
    z-index: 6;
}
.emojiBtn {
    border: none;
    background: transparent;
    font-size: 18px;
    padding: 4px 6px;
    cursor: pointer;
}

.editWrap { display: grid; gap: 6px; }
.editInput {
    width: 100%;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 6px 10px;
}
.editActions { display: flex; gap: 8px; }

.edited { color: #9ca3af; font-size: 12px; }

.emojiBtn {
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 18px;
    padding: 6px;
    line-height: 1;
}
.emojiPickerComposer {
    position: absolute;
    bottom: 56px; /* над компоузером */
    left: 56px;   /* рядом с кнопками */
    display: flex;
    gap: 6px;
    padding: 6px;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 6px 24px rgba(0,0,0,.12);
    z-index: 20;
}


.bubble { position: relative; } /* чтобы клик корректно ловился */

.ctxMenu{
    position: fixed; /* по координатам курсора */
    z-index: 9999;
    background: #fff;
    border: 1px solid #e5e7eb;
    box-shadow: 0 8px 24px rgba(0,0,0,.12);
    border-radius: 12px;
    padding: 8px;
    min-width: 220px;
}

.emojiGrid{
    display: grid;
    grid-template-columns: repeat(6, 28px);
    gap: 6px;
    padding: 4px 2px;
    justify-items: center;
}

.emojiBtn{
    width: 28px; height: 28px;
    border-radius: 8px;
    border: none; background: transparent;
    cursor: pointer; font-size: 18px;
}
.emojiBtn:hover{ background: #f3f4f6; }

.menuLine{ height: 1px; background:#e5e7eb; margin: 6px 0; }

.menuActions{ display: flex; gap: 6px; padding-top: 2px; }
.menuBtn{
    flex: 1;
    border: none;
    background: #f9fafb;
    padding: 8px 10px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 14px;
}
.menuBtn:hover{ background: #eef2ff; }
.danger{ background:#fff1f2; }
.danger:hover{ background:#ffe4e6; }
.quickReact {
    position: absolute;
    top: -6px;
    right: -6px;
    width: 26px;
    height: 26px;
    border-radius: 999px;
    border: none;
    background: white;
    box-shadow: 0 2px 8px rgba(0,0,0,.12);
    cursor: pointer;
    opacity: .0;
    transition: opacity .15s ease, transform .15s ease;
    transform: scale(0.95);
}
.bubble:hover .quickReact {
    opacity: .9;
    transform: scale(1);
}
.quickReact:hover {
    opacity: 1;
}
